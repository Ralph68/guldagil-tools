<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Guldagil Tools: features/port/api/calculate.php File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Guldagil Tools
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('calculate_8php.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">calculate.php File Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-var-members" class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:acfb142dbeaf7c3300cf1c939a62c4ad0" id="r_acfb142dbeaf7c3300cf1c939a62c4ad0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a> ( $_SERVER[ 'REQUEST_METHOD']==='OPTIONS')</td></tr>
<tr class="memitem:af4b6fb1bbc77ccc05f10da3b16935b99" id="r_af4b6fb1bbc77ccc05f10da3b16935b99"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af4b6fb1bbc77ccc05f10da3b16935b99">$response</a></td></tr>
<tr class="memitem:a73a034a7a0fbdd2c93f23fb6c9946ee9" id="r_a73a034a7a0fbdd2c93f23fb6c9946ee9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a73a034a7a0fbdd2c93f23fb6c9946ee9">$start_time</a> = microtime(true)</td></tr>
<tr class="memitem:abe4cc9788f52e49485473dc699537388" id="r_abe4cc9788f52e49485473dc699537388"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abe4cc9788f52e49485473dc699537388">try</a></td></tr>
<tr class="memitem:ae754d6373f275e781f47c8bc9b994b6d" id="r_ae754d6373f275e781f47c8bc9b994b6d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae754d6373f275e781f47c8bc9b994b6d">$content_type</a> = $_SERVER['CONTENT_TYPE'] ?? ''</td></tr>
<tr class="memitem:a2588092c85f15ea4e812a8a1f13e0a59" id="r_a2588092c85f15ea4e812a8a1f13e0a59"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a>(strpos($content_type, 'application/json') !==false)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2588092c85f15ea4e812a8a1f13e0a59">else</a></td></tr>
<tr class="memitem:acbb0e338149e955b7f2d827719bc4358" id="r_acbb0e338149e955b7f2d827719bc4358"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a>(empty($input))&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acbb0e338149e955b7f2d827719bc4358">$required_fields</a> = ['departement', 'poids', '<a class="el" href="public_2index_8php.html#ace9431cd6d27c3aa30cfb2cfbef434a3">type</a>']</td></tr>
<tr class="memitem:a0a01bb473c1255da8e7457c4e4f46c65" id="r_a0a01bb473c1255da8e7457c4e4f46c65"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0a01bb473c1255da8e7457c4e4f46c65">$missing_fields</a> = []</td></tr>
<tr class="memitem:a2bd5c012e9d69957ade8b7e0a999e7d2" id="r_a2bd5c012e9d69957ade8b7e0a999e7d2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="debug-500_8php.html#aa6f5c8df49e67df1a35ff525fb283abc">foreach</a>( $required_fields as $field) <a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a>(!empty($missing_fields))&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2bd5c012e9d69957ade8b7e0a999e7d2">$params</a></td></tr>
<tr class="memitem:ad33c90a70b090fac4aed8497efd4ad9d" id="r_ad33c90a70b090fac4aed8497efd4ad9d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a>(!preg_match('/^\d{2}$/', $params&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad33c90a70b090fac4aed8497efd4ad9d">$dept_num</a> ['departement'])) = (int)$params['departement']</td></tr>
<tr class="memitem:abdbbe6475f424561475f7b636f53a3f6" id="r_abdbbe6475f424561475f7b636f53a3f6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a>( $dept_num&lt; 1||$dept_num &gt; 95) <a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a>($params['poids']&lt;=0) <a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a>( $params[ 'poids'] &gt; 3500) <a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a>(!in_array($params['<a class="el" href="public_2index_8php.html#ace9431cd6d27c3aa30cfb2cfbef434a3">type</a>'], ['colis', 'palette', 'express']))&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abdbbe6475f424561475f7b636f53a3f6">$valid_options</a> = ['standard', 'rdv', 'premium_13h', 'premium_18h']</td></tr>
<tr class="memitem:a9023cc8861432d379622239dc10ad6d7" id="r_a9023cc8861432d379622239dc10ad6d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a>(!in_array($params['service_livraison'], $valid_options)) <a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a>(defined( '<a class="el" href="config_8php.html#a758c150b67e476ecf77478f16b387c61">DEBUG</a>') &amp;&amp;<a class="el" href="config_8php.html#a758c150b67e476ecf77478f16b387c61">DEBUG</a>) <a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a>($params['poids'] &gt; 2000)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9023cc8861432d379622239dc10ad6d7">$transport_class_path</a> = __DIR__ . '/../transport.php'</td></tr>
<tr class="memitem:afe67d9974fdbe3ce10c89281469f3df9" id="r_afe67d9974fdbe3ce10c89281469f3df9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a>(!class_exists( '<a class="el" href="class_transport.html">Transport</a>')) <a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a>(defined('<a class="el" href="config_8php.html#a758c150b67e476ecf77478f16b387c61">DEBUG</a>') &amp;&amp;<a class="el" href="config_8php.html#a758c150b67e476ecf77478f16b387c61">DEBUG</a>)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe67d9974fdbe3ce10c89281469f3df9">$db_connection</a> = null</td></tr>
<tr class="memitem:a208f6050e0847841e8271ad728c59113" id="r_a208f6050e0847841e8271ad728c59113"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a208f6050e0847841e8271ad728c59113">$transport</a> = new <a class="el" href="class_transport.html">Transport</a>($db_connection)</td></tr>
<tr class="memitem:a233d12bd8b6d3453e9a7a3f0b8c31db2" id="r_a233d12bd8b6d3453e9a7a3f0b8c31db2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a233d12bd8b6d3453e9a7a3f0b8c31db2">$results</a> = null</td></tr>
<tr class="memitem:a90e0b3971d6c0c3cc2ffc379c6b30ae7" id="r_a90e0b3971d6c0c3cc2ffc379c6b30ae7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a90e0b3971d6c0c3cc2ffc379c6b30ae7">$signature_used</a> = 'unknown'</td></tr>
<tr class="memitem:aad58462cd84c36b556fbd3b337b0bcf9" id="r_aad58462cd84c36b556fbd3b337b0bcf9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aad58462cd84c36b556fbd3b337b0bcf9">$valid_results</a> = []</td></tr>
<tr class="memitem:a300511b41b28fbe95a69848c8a842d37" id="r_a300511b41b28fbe95a69848c8a842d37"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a300511b41b28fbe95a69848c8a842d37">$carrier_names</a></td></tr>
<tr class="memitem:adc735bd27576c7a23349a8fc00aaa64d" id="r_adc735bd27576c7a23349a8fc00aaa64d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adc735bd27576c7a23349a8fc00aaa64d">$carrier_results</a> = []</td></tr>
<tr class="memitem:af6f4fe2bbfc5acb13f89e72775538ef1" id="r_af6f4fe2bbfc5acb13f89e72775538ef1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af6f4fe2bbfc5acb13f89e72775538ef1">$response</a> ['message'] = 'Aucun transporteur disponible pour cette destination'</td></tr>
<tr class="memitem:a5992615fd84757ac7f4c14643826cd37" id="r_a5992615fd84757ac7f4c14643826cd37"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5992615fd84757ac7f4c14643826cd37">$response</a> ['errors'][] = 'Aucun tarif valide trouvé'</td></tr>
<tr class="memitem:a1eb47d68a4a4f73debf91b15e179d813" id="r_a1eb47d68a4a4f73debf91b15e179d813"><td class="memItemLeft" align="right" valign="top"><a class="el" href="debug-500_8php.html#a2a99526254229216f8db37db144326ba">catch</a>(Exception $e)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1eb47d68a4a4f73debf91b15e179d813">finally</a></td></tr>
<tr class="memitem:ac4edb35ef8807448586364e6c2cf5a30" id="r_ac4edb35ef8807448586364e6c2cf5a30"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac4edb35ef8807448586364e6c2cf5a30">$json_flags</a> = JSON_UNESCAPED_UNICODE</td></tr>
<tr class="memitem:afe5c9642ad8ca933974ba3a491fb2760" id="r_afe5c9642ad8ca933974ba3a491fb2760"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a>(defined('<a class="el" href="version_8php.html#aea07c3cbf1fe49903abb5eb62e42d1f2">APP_VERSION</a>'))&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe5c9642ad8ca933974ba3a491fb2760">exit</a></td></tr>
</table>
<a name="doc-var-members" id="doc-var-members"></a><h2 id="header-doc-var-members" class="groupheader">Variable Documentation</h2>
<a id="a300511b41b28fbe95a69848c8a842d37" name="a300511b41b28fbe95a69848c8a842d37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a300511b41b28fbe95a69848c8a842d37">&#9670;&#160;</a></span>$carrier_names</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$carrier_names</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= [</div>
<div class="line">        <span class="stringliteral">&#39;xpo&#39;</span> =&gt; <span class="stringliteral">&#39;XPO Logistics&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;heppner&#39;</span> =&gt; <span class="stringliteral">&#39;Heppner&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;kn&#39;</span> =&gt; <span class="stringliteral">&#39;Kuehne+Nagel&#39;</span></div>
<div class="line">    ]</div>
</div><!-- fragment -->
</div>
</div>
<a id="adc735bd27576c7a23349a8fc00aaa64d" name="adc735bd27576c7a23349a8fc00aaa64d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc735bd27576c7a23349a8fc00aaa64d">&#9670;&#160;</a></span>$carrier_results</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$carrier_results = []</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae754d6373f275e781f47c8bc9b994b6d" name="ae754d6373f275e781f47c8bc9b994b6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae754d6373f275e781f47c8bc9b994b6d">&#9670;&#160;</a></span>$content_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$content_type = $_SERVER['CONTENT_TYPE'] ?? ''</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="afe67d9974fdbe3ce10c89281469f3df9" name="afe67d9974fdbe3ce10c89281469f3df9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe67d9974fdbe3ce10c89281469f3df9">&#9670;&#160;</a></span>$db_connection</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a>(!class_exists('<a class="el" href="class_transport.html">Transport</a>')) <a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a> (defined( '<a class="el" href="config_8php.html#a758c150b67e476ecf77478f16b387c61">DEBUG</a>') &amp;&amp;<a class="el" href="config_8php.html#a758c150b67e476ecf77478f16b387c61">DEBUG</a>) $db_connection = null</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad33c90a70b090fac4aed8497efd4ad9d" name="ad33c90a70b090fac4aed8497efd4ad9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad33c90a70b090fac4aed8497efd4ad9d">&#9670;&#160;</a></span>$dept_num</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a> (!preg_match('/^\d{2}$/', $params $dept_num[ 'departement'])) = (int)$params['departement']</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac4edb35ef8807448586364e6c2cf5a30" name="ac4edb35ef8807448586364e6c2cf5a30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4edb35ef8807448586364e6c2cf5a30">&#9670;&#160;</a></span>$json_flags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$json_flags = JSON_UNESCAPED_UNICODE</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0a01bb473c1255da8e7457c4e4f46c65" name="a0a01bb473c1255da8e7457c4e4f46c65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a01bb473c1255da8e7457c4e4f46c65">&#9670;&#160;</a></span>$missing_fields</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$missing_fields = []</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2bd5c012e9d69957ade8b7e0a999e7d2" name="a2bd5c012e9d69957ade8b7e0a999e7d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bd5c012e9d69957ade8b7e0a999e7d2">&#9670;&#160;</a></span>$params</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="debug-500_8php.html#aa6f5c8df49e67df1a35ff525fb283abc">foreach</a>($required_fields as $field) <a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a> (!empty( $missing_fields)) $params</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= [</div>
<div class="line">        <span class="stringliteral">&#39;departement&#39;</span> =&gt; str_pad(trim($input[<span class="stringliteral">&#39;departement&#39;</span>]), 2, <span class="charliteral">&#39;0&#39;</span>, STR_PAD_LEFT),</div>
<div class="line">        <span class="stringliteral">&#39;poids&#39;</span> =&gt; (float)$input[<span class="stringliteral">&#39;poids&#39;</span>],</div>
<div class="line">        <span class="stringliteral">&#39;type&#39;</span> =&gt; trim(strtolower($input[<span class="stringliteral">&#39;type&#39;</span>])),</div>
<div class="line">        <span class="stringliteral">&#39;adr&#39;</span> =&gt; isset($input[<span class="stringliteral">&#39;adr&#39;</span>]) ? (in_array($input[<span class="stringliteral">&#39;adr&#39;</span>], [<span class="stringliteral">&#39;oui&#39;</span>, <span class="stringliteral">&#39;yes&#39;</span>, <span class="charliteral">&#39;1&#39;</span>, 1, <span class="keyword">true</span>], <span class="keyword">true</span>) ? <span class="stringliteral">&#39;oui&#39;</span> : <span class="stringliteral">&#39;non&#39;</span>) : <span class="stringliteral">&#39;non&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;service_livraison&#39;</span> =&gt; trim($input[<span class="stringliteral">&#39;service_livraison&#39;</span>] ?? <span class="stringliteral">&#39;standard&#39;</span>),</div>
<div class="line">        <span class="stringliteral">&#39;enlevement&#39;</span> =&gt; isset($input[<span class="stringliteral">&#39;enlevement_expediteur&#39;</span>]) &amp;&amp; in_array($input[<span class="stringliteral">&#39;enlevement_expediteur&#39;</span>], [<span class="stringliteral">&#39;1&#39;</span>, 1, true, <span class="stringliteral">&#39;on&#39;</span>], true) ? <span class="stringliteral">&#39;oui&#39;</span> : <span class="stringliteral">&#39;non&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;palettes&#39;</span> =&gt; max(0, (int)($input[<span class="stringliteral">&#39;nb_palettes&#39;</span>] ?? 0))</div>
<div class="line">    ]</div>
</div><!-- fragment -->
</div>
</div>
<a id="acbb0e338149e955b7f2d827719bc4358" name="acbb0e338149e955b7f2d827719bc4358"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbb0e338149e955b7f2d827719bc4358">&#9670;&#160;</a></span>$required_fields</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a> (empty( $input)) $required_fields = ['departement', 'poids', '<a class="el" href="public_2index_8php.html#ace9431cd6d27c3aa30cfb2cfbef434a3">type</a>']</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af4b6fb1bbc77ccc05f10da3b16935b99" name="af4b6fb1bbc77ccc05f10da3b16935b99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4b6fb1bbc77ccc05f10da3b16935b99">&#9670;&#160;</a></span>$response <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$response</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= [</div>
<div class="line">    <span class="stringliteral">&#39;success&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line">    <span class="stringliteral">&#39;carriers&#39;</span> =&gt; [],</div>
<div class="line">    <span class="stringliteral">&#39;best_rate&#39;</span> =&gt; <span class="keyword">null</span>,</div>
<div class="line">    <span class="stringliteral">&#39;affretement&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line">    <span class="stringliteral">&#39;message&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;errors&#39;</span> =&gt; [],</div>
<div class="line">    <span class="stringliteral">&#39;warnings&#39;</span> =&gt; [],</div>
<div class="line">    <span class="stringliteral">&#39;debug&#39;</span> =&gt; <span class="keyword">null</span>,</div>
<div class="line">    <span class="stringliteral">&#39;metadata&#39;</span> =&gt; [</div>
<div class="line">        <span class="stringliteral">&#39;version&#39;</span> =&gt; defined(<span class="stringliteral">&#39;APP_VERSION&#39;</span>) ? <a class="code hl_variable" href="version_8php.html#aea07c3cbf1fe49903abb5eb62e42d1f2">APP_VERSION</a> : <span class="stringliteral">&#39;0.5&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;build&#39;</span> =&gt; defined(<span class="stringliteral">&#39;BUILD_NUMBER&#39;</span>) ? <a class="code hl_variable" href="version_8php.html#afb7d38df03127472ddb51514b6ca82e7">BUILD_NUMBER</a> : <span class="stringliteral">&#39;dev&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;timestamp&#39;</span> =&gt; date(<span class="charliteral">&#39;c&#39;</span>),</div>
<div class="line">        <span class="stringliteral">&#39;processing_time&#39;</span> =&gt; 0</div>
<div class="line">    ]</div>
<div class="line">]</div>
<div class="ttc" id="aversion_8php_html_aea07c3cbf1fe49903abb5eb62e42d1f2"><div class="ttname"><a href="version_8php.html#aea07c3cbf1fe49903abb5eb62e42d1f2">APP_VERSION</a></div><div class="ttdeci">const APP_VERSION</div><div class="ttdef"><b>Definition</b> version.php:9</div></div>
<div class="ttc" id="aversion_8php_html_afb7d38df03127472ddb51514b6ca82e7"><div class="ttname"><a href="version_8php.html#afb7d38df03127472ddb51514b6ca82e7">BUILD_NUMBER</a></div><div class="ttdeci">const BUILD_NUMBER</div><div class="ttdef"><b>Definition</b> version.php:13</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5992615fd84757ac7f4c14643826cd37" name="a5992615fd84757ac7f4c14643826cd37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5992615fd84757ac7f4c14643826cd37">&#9670;&#160;</a></span>$response <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$response[ 'errors'][] = 'Aucun tarif valide trouvé'</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af6f4fe2bbfc5acb13f89e72775538ef1" name="af6f4fe2bbfc5acb13f89e72775538ef1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6f4fe2bbfc5acb13f89e72775538ef1">&#9670;&#160;</a></span>$response <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$response[ 'message'] = 'Aucun transporteur disponible pour cette destination'</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a233d12bd8b6d3453e9a7a3f0b8c31db2" name="a233d12bd8b6d3453e9a7a3f0b8c31db2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a233d12bd8b6d3453e9a7a3f0b8c31db2">&#9670;&#160;</a></span>$results</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$results = null</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a90e0b3971d6c0c3cc2ffc379c6b30ae7" name="a90e0b3971d6c0c3cc2ffc379c6b30ae7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90e0b3971d6c0c3cc2ffc379c6b30ae7">&#9670;&#160;</a></span>$signature_used</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$signature_used = 'unknown'</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a73a034a7a0fbdd2c93f23fb6c9946ee9" name="a73a034a7a0fbdd2c93f23fb6c9946ee9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73a034a7a0fbdd2c93f23fb6c9946ee9">&#9670;&#160;</a></span>$start_time</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$start_time = microtime(true)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a208f6050e0847841e8271ad728c59113" name="a208f6050e0847841e8271ad728c59113"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a208f6050e0847841e8271ad728c59113">&#9670;&#160;</a></span>$transport</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$transport = new <a class="el" href="class_transport.html">Transport</a>($db_connection)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9023cc8861432d379622239dc10ad6d7" name="a9023cc8861432d379622239dc10ad6d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9023cc8861432d379622239dc10ad6d7">&#9670;&#160;</a></span>$transport_class_path</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a>(!in_array( $params[ 'service_livraison'], $valid_options)) <a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a>(defined('<a class="el" href="config_8php.html#a758c150b67e476ecf77478f16b387c61">DEBUG</a>') &amp;&amp;<a class="el" href="config_8php.html#a758c150b67e476ecf77478f16b387c61">DEBUG</a>) <a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a> ( $params[ 'poids'] &gt; 2000) $transport_class_path = __DIR__ . '/../transport.php'</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="abdbbe6475f424561475f7b636f53a3f6" name="abdbbe6475f424561475f7b636f53a3f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdbbe6475f424561475f7b636f53a3f6">&#9670;&#160;</a></span>$valid_options</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a>($dept_num&lt; 1|| $dept_num &gt; 95) <a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a>( $params[ 'poids']&lt;=0) <a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a>($params['poids'] &gt; 3500) <a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a> (!in_array( $params[ '<a class="el" href="public_2index_8php.html#ace9431cd6d27c3aa30cfb2cfbef434a3">type</a>'],[ 'colis', 'palette', 'express'])) $valid_options = ['standard', 'rdv', 'premium_13h', 'premium_18h']</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aad58462cd84c36b556fbd3b337b0bcf9" name="aad58462cd84c36b556fbd3b337b0bcf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad58462cd84c36b556fbd3b337b0bcf9">&#9670;&#160;</a></span>$valid_results</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$valid_results = []</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2588092c85f15ea4e812a8a1f13e0a59" name="a2588092c85f15ea4e812a8a1f13e0a59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2588092c85f15ea4e812a8a1f13e0a59">&#9670;&#160;</a></span>else</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a>(defined( '<a class="el" href="config_8php.html#a758c150b67e476ecf77478f16b387c61">DEBUG</a>') &amp;&amp;<a class="el" href="config_8php.html#a758c150b67e476ecf77478f16b387c61">DEBUG</a> &amp;&amp;isset( $transport-&gt;debug)) <a class="el" href="debug-500_8php.html#aa6f5c8df49e67df1a35ff525fb283abc">foreach</a>($carrier_results as $carrier=&gt; $data) <a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a> (!empty( $valid_results)) else</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">{</div>
<div class="line">        $input = $_POST</div>
</div><!-- fragment -->
</div>
</div>
<a id="afe5c9642ad8ca933974ba3a491fb2760" name="afe5c9642ad8ca933974ba3a491fb2760"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe5c9642ad8ca933974ba3a491fb2760">&#9670;&#160;</a></span>exit</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#acfb142dbeaf7c3300cf1c939a62c4ad0">if</a> (defined( '<a class="el" href="version_8php.html#aea07c3cbf1fe49903abb5eb62e42d1f2">APP_VERSION</a>')) exit</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1eb47d68a4a4f73debf91b15e179d813" name="a1eb47d68a4a4f73debf91b15e179d813"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1eb47d68a4a4f73debf91b15e179d813">&#9670;&#160;</a></span>finally</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="debug-500_8php.html#a2a99526254229216f8db37db144326ba">catch</a> (Exception $e) finally</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">{</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_variable" href="#af4b6fb1bbc77ccc05f10da3b16935b99">$response</a>[<span class="stringliteral">&#39;metadata&#39;</span>][<span class="stringliteral">&#39;processing_time&#39;</span>] = round((microtime(<span class="keyword">true</span>) - <a class="code hl_variable" href="#a73a034a7a0fbdd2c93f23fb6c9946ee9">$start_time</a>) * 1000, 2)</div>
<div class="ttc" id="acalculate_8php_html_a73a034a7a0fbdd2c93f23fb6c9946ee9"><div class="ttname"><a href="#a73a034a7a0fbdd2c93f23fb6c9946ee9">$start_time</a></div><div class="ttdeci">$start_time</div><div class="ttdef"><b>Definition</b> calculate.php:43</div></div>
<div class="ttc" id="acalculate_8php_html_af4b6fb1bbc77ccc05f10da3b16935b99"><div class="ttname"><a href="#af4b6fb1bbc77ccc05f10da3b16935b99">$response</a></div><div class="ttdeci">$response</div><div class="ttdef"><b>Definition</b> calculate.php:25</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acfb142dbeaf7c3300cf1c939a62c4ad0" name="acfb142dbeaf7c3300cf1c939a62c4ad0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfb142dbeaf7c3300cf1c939a62c4ad0">&#9670;&#160;</a></span>if</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$_SERVER</em></span>[ 'REQUEST_METHOD']<span class="paramdefsep"> = </span><span class="paramdefval">==&#160;'OPTIONS'</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">{</div>
<div class="line">        <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&#39;Connexion base de données non disponible&#39;</span>, 500)</div>
</div><!-- fragment -->
</div>
</div>
<a id="abe4cc9788f52e49485473dc699537388" name="abe4cc9788f52e49485473dc699537388"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe4cc9788f52e49485473dc699537388">&#9670;&#160;</a></span>try</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">try</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">{</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> ($_SERVER[<span class="stringliteral">&#39;REQUEST_METHOD&#39;</span>] !== <span class="stringliteral">&#39;POST&#39;</span>) {</div>
<div class="line">        <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&#39;Méthode HTTP non autorisée&#39;</span>, 405);</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    $input = <span class="keyword">null</span></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_9a1a4359f87a67855aa82c0560dc9571.html">features</a></li><li class="navelem"><a href="dir_9b554f43c9e81e65e251f7aea0fae52f.html">port</a></li><li class="navelem"><a href="dir_b78ffcc5e4c943f45fd7786358e160de.html">api</a></li><li class="navelem"><a href="calculate_8php.html">calculate.php</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
